<html>

<head>
    <meta charset="UTF-8">
    <title>wallet</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/detail.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker3.css"
        integrity="sha256-AghQEDQh6JXTN1iI/BatwbIHpJRKQcg2lay7DE5U/RQ=" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
        integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
        crossorigin="anonymous"></script>

    <!-- datapicker -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"
        integrity="sha256-bqVeqGdJ7h/lYPq6xrPv/YGzMEb6dNxlfiTUHSgRCp8=" crossorigin="anonymous"></script>
    <!-- datapicker 日本語化 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/locales/bootstrap-datepicker.ja.min.js"
        integrity="sha256-IX182a23hiQE65+kYOND1ZIX2Vpl0cHb96g9nJqqqW0=" crossorigin="anonymous"></script>

    <script src="./js/api.js"></script>
    <script src="./js/detail.js"></script>
</head>

<body class="text-center">
    <div class="mx-auto">
        <div class="card" style="width: 70rem;">
            <main class="main">
                <div class="sub">
                    <h1 class="month"><input id="datepicker" type="text" /></h1>
                    <div class="sub-table">
                        <div class="members">
                            <div class="subtitle">
                                <h4>メンバー</h4>
                            </div>
                            <table class="table table-striped members">
                                <thead>
                                    <tr>
                                        <th scope="col">支払い</th>
                                        <th scope="col">合計</th>
                                    </tr>
                                </thead>
                                <tbody id="memberbody"></tbody>
                            </table>
                        </div><!-- members -->

                        <div class="categories">
                            <div class="subtitle">
                                <h4>項目</h4>
                            </div>
                            <table class="table table-striped categories">
                                <thead>
                                    <tr>
                                        <th scope="col">項目</th>
                                        <th scope="col">合計</th>
                                    </tr>
                                </thead>
                                <tbody id="categorybody"></tbody>
                            </table>
                        </div><!-- categories -->
                    </div>

                    <div class="total">
                        <table class="table table-striped total">
                            <thead>
                                <tr>
                                    <th scope="col">合計</th>
                                    <th scope="col" id="total-price"></th>
                                </tr>
                            </thead>
                        </table>
                    </div><!-- total -->
                    <a href="" class="btn btn-secondary" id="go-back">戻る</a>
                </div><!-- sub -->
            </main>
        </div>
    </div>

    <script>
        // パラメータからグループIDを取得
        var groupId;
        const searchParams = new URLSearchParams(window.location.search)

        if (searchParams.has('id')) {
            groupId = searchParams.get('id');
        } else {
            window.location.href = "error";
        }

        // hrefを書き換える
        let input = document.getElementById('go-back');
        input.setAttribute('href', "group?id=" + groupId);

        // 画面表示時の処理
        detail();

    </script>
</body>

</html>